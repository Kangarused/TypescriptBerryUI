var I=Object.defineProperty,N=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var A=(e,t,n)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,B=(e,t)=>{for(var n in t||(t={}))M.call(t,n)&&A(e,n,t[n]);if(w)for(var n of w(t))H.call(t,n)&&A(e,n,t[n]);return e},z=(e,t)=>N(e,L(t));import{r as o,E as P,_ as R,j as r,a as i,G as d,s as j,B as D,F as G,P as O,T as E,W as y,u as U,b as W,A as _}from"./index.2d83faaf.js";import{C as $,D as q,T as V,a as v,b as x,g as J,P as K,p as Q,c as X}from"./TableSortCell.fa9e68c9.js";import{M as Y}from"./MainCard.32af11b1.js";import{u as Z,E as ee,F as b,S as F,B as h}from"./FormTextInput.da32d9cc.js";var T=o.exports.forwardRef(function(e,t){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return o.exports.createElement(P,R({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 16 16"},e,{ref:t}),o.exports.createElement("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"}))});T.displayName="Plus";function te(e){const t=Z({defaultValues:e.filter}),n=t.handleSubmit(e.onSubmit),s=()=>{t.reset(),n()};return o.exports.useEffect(()=>{e.triggerByDefault&&e.onSubmit(e.filter)},[]),r(ee,z(B({},t),{handleSubmit:n,handleReset:s,readonly:!1,children:i(d,{container:!0,spacing:1,children:[r(d,{item:!0,xs:12,sm:6,lg:3,children:r(b,{name:"name",label:"Name"})}),r(d,{item:!0,xs:12,sm:6,lg:3,children:r(b,{name:"email",label:"Email"})}),r(d,{item:!0,xs:12,sm:6,lg:3,children:r(b,{name:"username",label:"Username"})}),r(d,{item:!0,xs:12,sm:6,lg:3,children:i(F,{direction:"row",spacing:1,children:[r(h,{variant:"outlined",color:"default",type:"reset",children:"Clear search"}),r(h,{variant:"outlined",type:"submit",children:"Search"})]})})]})}))}var k=o.exports.forwardRef(function(e,t){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return o.exports.createElement(P,R({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 48 48"},e,{ref:t}),o.exports.createElement("path",{d:"M24 6.75a6.25 6.25 0 0 1 6.25 6.02V13H37a1.75 1.75 0 0 1 .14 3.5h-1.31l-1.62 21.57A4.25 4.25 0 0 1 29.97 42H18.03a4.25 4.25 0 0 1-4.24-3.93L12.17 16.5H11c-.92 0-1.67-.7-1.74-1.6l-.01-.15c0-.92.7-1.67 1.6-1.74L11 13h6.75c0-3.3 2.55-6 5.8-6.23l.22-.02H24zm3.75 13c-.65 0-1.18.5-1.24 1.12l-.01.13v12.13a1.25 1.25 0 0 0 2.5 0V20.87a1.25 1.25 0 0 0-1.25-1.12zm-7.5 0c-.65 0-1.18.5-1.24 1.12L19 21v12.13a1.25 1.25 0 0 0 2.5 0V20.87a1.25 1.25 0 0 0-1.25-1.12zm3.92-9.5H24a2.75 2.75 0 0 0-2.75 2.58V13h5.5a2.75 2.75 0 0 0-2.58-2.74z"}))});k.displayName="Delete";const re=j(D)(({theme:e})=>({backgroundColor:e.palette.background.paper,border:"2px solid",borderColor:e.palette.background.contentContrast,borderRadius:"10px",padding:e.spacing(2)}));function ne(e){const{title:t,content:n,action:s}=e,[a,u]=o.exports.useState(!1),[g,p]=o.exports.useState(null),f=c=>{p(c.currentTarget)},m=()=>{p(null)},l=()=>(u(!0),s().then(()=>{m()}).finally(()=>{u(!1)})),C=a?r($,{color:"inherit",size:16}):null;return i(G,{children:[o.exports.cloneElement(e.children,{onClick:f}),r(O,{id:"confirm-popover",open:Boolean(g),anchorEl:g,onClose:m,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:i(re,{children:[r(E,{variant:"h3",gutterBottom:!0,children:t}),r(E,{variant:"body1",gutterBottom:!0,children:n}),i(d,{className:"pt-4",container:!0,spacing:1,columns:2,children:[r(d,{item:!0,xs:1,children:r(h,{fullWidth:!0,color:"default",variant:"outlined",onClick:m,disabled:a,children:"Cancel"})}),r(d,{item:!0,xs:1,children:r(h,{fullWidth:!0,color:"primary",variant:"outlined",onClick:l,disabled:a,startIcon:C,children:"Confirm"})})]})]})})]})}function ae(){const e={isLoading:!1};return{deleteUser:n=>e.mutateAsync({userId:n}).then(()=>{y("Successfully deleted user",{type:"success"})}).catch(s=>{throw y("Failed to delete user",{type:"error"}),s}),deleting:e.isLoading}}function oe(e){const{filter:t,data:n,loading:s,onChange:a}=e,u=U(),{deleteUser:g,deleting:p}=ae(),f=l=>u(`./${l.userId}`),m=l=>(y("Something went wrong",{type:"error"}),g(l.userId).then(()=>{a(t)}));return r(D,{className:"pt-4",children:r(q,{loading:s,page:t.page,headerRow:se,bodyRow:ie(n.items,p,f,m),pageSize:t.pageSize,totalRecords:n.totalRecords,sortColumn:t.sortColumn,sortDirection:t.sortDirection,onChange:a})})}const se=i(V,{children:[r(v,{sortBy:"username",children:"Username"}),r(v,{sortBy:"name",children:"Name"}),r(v,{sortBy:"email",children:"Email"}),r(x,{width:100,children:"Actions"})]}),ie=(e,t,n,s)=>e.map(a=>i(V,{children:[i(x,{children:[" ",a.username," "]}),i(x,{children:[" ",a.name," "]}),i(x,{children:[" ",a.email," "]}),r(x,{children:i(F,{direction:"row",spacing:1,children:[r(h,{variant:"outlined",size:"small",onClick:()=>n(a),disabled:t,children:"View"}),r(ne,{title:"Delete user",content:"Are you sure you want to delete this user?",action:async()=>s(a),children:r(h,{className:"min-w-0",color:"error",variant:"outlined",size:"small",disabled:t,children:r(k,{size:22})})})]})})]},a.userId));function le(){const[e,t]=o.exports.useState(J());return{data:e,search:(a,u)=>{t({items:[{userId:1,username:"Example",name:"Example User",email:"example.user@example.com"}],totalRecords:1})},loading:{isLoading:!1}.isLoading}}function pe(){const[e,t]=o.exports.useState({}),[n,s]=o.exports.useState({page:1,pageSize:K._10}),a=U(),{data:u,search:g,loading:p}=le(),f=c=>{t(c),l(c,Q(n))},m=c=>{l(e,X(n,c))},l=(c,S)=>{s(S),g(c,S)};return r(W,{children:i(Y,{title:"User Administration",secondary:ce(()=>{a(_.userDetail.createPath)}),children:[r(te,{filter:e,onSubmit:f,triggerByDefault:!0}),r(oe,{filter:n,data:u,loading:p,onChange:m})]})})}const ce=e=>r(h,{variant:"outlined",color:"secondary",size:"small",startIcon:r(T,{size:19}),onClick:e,children:"Add user"});export{pe as default};
